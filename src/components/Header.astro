---
import { Image } from "astro:assets";
import Logo from "@/assets/images/logo-papua-opensource.png";

import Link from "./Link.astro";
---

<header class="sticky top-0 z-50 px-4 w-full border-b bg-white lg:px-8">
  <div class="max-w-screen-xl flex mx-auto h-16 items-center justify-between">
    <div class="flex items-center gap-2 font-bold text-xl">
      <a href="/">
        <div class="flex items-center gap-2">
          <Image
            src={Logo}
            alt="Papua Open Source Logo"
            width={40}
            height={40}
            class="h-8 w-8 rounded-full"
          />
          <span>Papua Open Source</span>
        </div>
      </a>
    </div>
    <nav class="hidden md:flex items-center gap-6 justify-end">
      <Link
        href="/tentang"
        class="text-sm hover:text-primary"
        activeClass="font-medium border-b-2 border-slate-600"
      >
        Tentang
      </Link>
      <Link
        href="/kontribusi"
        class="text-sm hover:text-primary"
        activeClass="font-medium border-b-2 border-slate-600"
      >
        Kontribusi
      </Link>
      <Link
        href="/kontak"
        class="text-sm hover:text-primary"
        activeClass="font-medium border-b-2 border-slate-600"
      >
        Kontak
      </Link>
    </nav>

    <!-- Mobile Menu -->
    <div class="md:hidden" id="mobile-menu-container">
      <button
        class="inline-flex items-center justify-center rounded-md border border-input bg-background p-2 hover:bg-accent hover:text-accent-foreground"
        id="mobile-menu-toggle"
      >
        <span class="sr-only">Toggle menu</span>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="h-6 w-6"
        >
          <line x1="4" x2="20" y1="12" y2="12"></line>
          <line x1="4" x2="20" y1="6" y2="6"></line>
          <line x1="4" x2="20" y1="18" y2="18"></line>
        </svg>
      </button>

      <div
        id="mobile-menu"
        class="absolute top-16 left-0 right-0 bg-white border-b p-4 shadow-md hidden"
      >
        <nav class="flex flex-col space-y-4">
          <Link
            href="/tentang"
            class="text-sm font-medium hover:text-primary"
            data-menu-link
          >
            Tentang
          </Link>
          <Link
            href="/kontribusi"
            class="text-sm font-medium hover:text-primary"
            data-menu-link
          >
            Kontribusi
          </Link>
          <Link
            href="/kontak"
            class="text-sm font-medium hover:text-primary"
            data-menu-link
          >
            Kontak
          </Link>
        </nav>
      </div>
    </div>
  </div>
</header>

<script>
  // Client-side JavaScript for toggling the mobile menu
  document.addEventListener("DOMContentLoaded", () => {
    const mobileMenuToggle = document.getElementById("mobile-menu-toggle");
    const mobileMenu = document.getElementById("mobile-menu");
    const menuLinks = document.querySelectorAll("[data-menu-link]");

    if (mobileMenuToggle && mobileMenu) {
      mobileMenuToggle.addEventListener("click", () => {
        const isHidden = mobileMenu.classList.contains("hidden");

        if (isHidden) {
          mobileMenu.classList.remove("hidden");
        } else {
          mobileMenu.classList.add("hidden");
        }
      });

      // Close menu when a link is clicked
      menuLinks.forEach((link) => {
        link.addEventListener("click", () => {
          mobileMenu.classList.add("hidden");
        });
      });
    }
  });
</script>
